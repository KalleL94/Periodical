{# app/templates/admin_users.html #}
{% extends "base.html" %}

{% block page_content %}

{% if success %}
<div style="background: rgba(100,255,100,0.2); border: 1px solid #4caf50; padding: 12px; border-radius: var(--radius); margin-bottom: 16px;">
    {{ success }}
</div>
{% endif %}

<div class="page-header">
    <div class="page-header-left">
        <h2 class="page-title" style="margin: 0;">Användare</h2>
    </div>
    <div class="page-header-right">
        <a href="/admin/users/create" class="btn">Skapa ny användare</a>
    </div>
</div>

<div class="card">
    <table>
        <thead>
            <tr>
                <th>ID</th>
                <th>Användarnamn</th>
                <th>Namn</th>
                <th>Roll</th>
                <th class="th_right">Lön</th>
                <th></th>
            </tr>
        </thead>
        <tbody>
            {% for u in users %}
            <tr>
                <td data-label="ID">{{ u.id }}</td>
                <td data-label="Användarnamn">{{ u.username }}</td>
                <td data-label="Namn">{{ u.name }}</td>
                <td data-label="Roll">
                    {% if u.role.value == 'admin' %}
                        <span class="badge" style="background: var(--danger);">Admin</span>
                    {% else %}
                        <span class="badge badge-off">User</span>
                    {% endif %}
                </td>
                <td data-label="Lön" class="td_right num">{{ "{:,}".format(u.wage) }} SEK</td>
                <td>
                    <a href="/admin/users/{{ u.id }}" class="btn secondary" style="padding: 4px 12px; font-size: 0.85rem;">Redigera</a>
                    <form method="POST" action="/admin/users/{{ u.id }}/reset-password" style="display: inline-block; margin-left: 8px;" onsubmit="return confirm('Återställ lösenord för {{ u.name }} till London1?');">
                        <button type="submit" class="btn" style="padding: 4px 12px; font-size: 0.85rem; background: var(--warning); border-color: var(--warning);">Återställ lösenord</button>
                    </form>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>

{% endblock %}
